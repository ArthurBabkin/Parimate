ML System Design Doc: Parimate
1. Зачем идем в разработку продукта?
Бизнес-цель
Создание надёжной и понятной системы валидации пользовательского аудио- и видеоконтента через Telegram-бота, с использованием ML и принципов Human-Centered AI (HCAI). Основная задача — верифицировать личность, речь, обстановку и выявлять признаки фейковых видео (например, дипфейков), чтобы обеспечить безопасность цифровой идентификации и подтвердить подлинность материалов.
Проблематика
•	Существующие методы верификации требуют участия человека, времени и ресурсов.
•	Участились случаи использования дипфейков, записанных голосов и поддельных видео.
•	У пользователей нет понятного и доступного интерфейса для верификации медиа-контента.
ML-преимущества
•	Распознавание лиц и речи с помощью предобученных моделей (например, FaceNet, Whisper).
•	Автоматический анализ метаданных и детекция признаков подделки (ffprobe, EXIF).
•	Обратная связь пользователю в Telegram с объяснением результата.
Критерии успеха
•	Минимум 85% точности распознавания лиц и речи.
•	Время ответа системы < 10 секунд.
•	Пользователи получают верифицированный ответ с интерпретацией.
Пользовательские потребности
•	Возможность отправить видео или голосовое сообщение и получить подтверждение личности и контента.
•	Интерфейс через Telegram без необходимости скачивания дополнительных приложений.
•	Доверие к результатам благодаря объяснению («почему система так решила»).
________________________________________
2. Бизнес-требования и ограничения
Требования
•	Разработка REST API и Telegram-бота для приёма контента и отображения результатов.
•	Поддержка распознавания лиц, речи, обработки видео.
•	Работа в Docker-среде, интеграция с PostgreSQL и MinIO.
ML-инфраструктура
•	Dockerized ML-инференс для распознавания лиц и речи.
•	Метаданные проверяются на целостность и реалистичность.
•	Возможность работы на сервере без GPU, с масштабируемостью при необходимости.
Ограничения
•	Пилотная версия ограничена одной персоной, заданной фразой и сценарием.
•	Нет интеграции с внешними удостоверяющими системами.
•	Не проводится полноценная liveness-проверка.
________________________________________
3. Что входит в скоуп проекта/итерации, что не входит
Что входит
•	Telegram-бот, получающий аудио/видео.
•	Распознавание лица и речи.
•	Сравнение с эталонной фразой и лицом.
•	Проверка метаданных.
•	Интерпретация и генерация обратной связи пользователю.
Что не входит
•	Поддержка нескольких пользователей и разных шаблонов сценариев.
•	Интеграция с биометрическими базами.
•	Глубокая дипфейк-детекция с помощью нейросетей.
________________________________________
4. Архитектура проекта
Общий обзор
•	Пользователь отправляет контент в Telegram-бот.
•	Бот отправляет данные в backend, который распределяет задачу по сервисам:
o	Модуль лиц — сравнение лиц на видео и эталоне
o	Модуль речи — сверка сказанной фразы с ожидаемой
o	Модуль метаданных — проверка таймстемпов, устройства и места
•	Результаты объединяются и возвращаются в Telegram с объяснением (XAI).
Компоненты:
•	FastAPI backend
•	PostgreSQL база для хранения истории
•	ML-инференс: Whisper, FaceNet, ffprobe
•	Docker + MinIO (хранилище)
•	Telegram Bot API
Потоки данных:
1.	Пользователь отправляет видео
2.	Видео отправляется в хранилище (MinIO)
3.	Backend инициирует пайплайн: лицо → речь → метаданные
4.	Каждая проверка возвращает бинарный результат + интерпретацию
5.	Telegram отправляет сообщение пользователю с итогом
Пример:
{
  "user_input": "Видео с лицом и голосом",
  "face_match": true,
  "speech_match": false,
  "metadata_valid": true,
  "explanation": "Лицо совпадает, но сказанная фраза не соответствует ожидаемой. Метаданные подтверждают, что запись сделана недавно на смартфон."
}
________________________________________
5. Возможности развития
•	Поддержка нескольких пользователей и лиц.
•	Интеграция с верификационными системами (например, ЕСИА).
•	Подключение моделей дипфейк-детекции (например, DeepFaceLab, FakeCatcher).
•	Добавление визуальной обратной связи (видео с наложенной интерпретацией).
•	Визуализация и мониторинг через Streamlit Dashboard или Telegram inline preview.
________________________________________
6. Роли в команде
•	Дарья — ML-инженер (лицевое распознавание)
•	Артур — backend + ASR (Whisper)
•	Илья — дипфейк + метаданные
•	Никита — взаимодействие с VLM/scene validation
•	Ильяс - документация и описание архитектуры
________________________________________
7. Принципы Human-AI Interaction Design (HAIID)
В проект Parimate интегрированы ключевые принципы из области Human-AI Interaction Design:
•	Explainability: система предоставляет пользователю объяснения к каждому результату. Например: "лицо совпадает, но речь — нет". Это укрепляет доверие и снижает тревожность пользователя.
•	Mixed-Initiative Interaction: система инициирует уточняющие вопросы, если входные данные неоднозначны. Пользователь может перезапустить верификацию по инструкции.
•	User-Centered Design: интерфейс Telegram-бота построен по принципу минимального барьера входа: всё происходит в привычном мессенджере без дополнительных приложений или терминалов.
•	Human-in-the-Loop Evaluation: при спорных результатах пользователь может запросить ручную проверку — это позволяет собрать данные для переобучения и отслеживания ошибок.
•	Fairness & Inclusivity: модели проверяются на искажения по полу и расе, в планах добавить адаптацию под различные диалекты и особенности речи.
•	Delegability Framework: система берет на себя то, что может (распознавание), но оставляет за человеком контроль — финальное решение принимает пользователь.
•	Patterns & Guidelines: мы ориентировались на People+AI Guidebook от Google, включая шаблоны взаимодействий и UX-паттерны для построения диалогов.
________________________________________
Документ основан на принципах HCAI, HAII и best practices в области Human-AI Interaction Design. Структура документа вдохновлена шаблоном ML System Design от Reliable ML и адаптирована под Telegram-бот Parimate.
